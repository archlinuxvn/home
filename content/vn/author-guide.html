---
title: Viết bài cho ArchLinuxVn
allow_comment: yes
tags: ['archlinuxvn', 'blog']
---

# Viết bài cho ArchLinuxVn

ArchLinuxVn sử dụng [nanoc] [] để tạo trang
các trang tĩnh từ mã nguồn được quản lý bằng `git`. Tất cả các tác giả
đều có quyền ghi vào mã nguồn chính trên nhánh `master` theo định dạng
`markdown`.

Tác giả viết bài cần nắm các bước kỹ thuật, cách sử dụng `git` và cách
viết bài bằng cú pháp `markdown`. Thông tin bổ ích cho việc viết bài
được chia thành các nhóm như sau đây.

## Nhóm A: Chỉ thực hiện một lần

1. Tài khoản để sửa bài. Đây là tài khoản để truy cập vào mã nguồn (git)
   của trang chủ. Mã nguồn để trên máy phục vụ <http://viettug.org>.
   Bạn cần liên hệ với [Kỳ Anh](/blog/~icy) để có được tài khoản này.

   * Trước khi xin một tài khoản, bạn cần chuẩn bị một cặp `SSH key`; nếu
     chưa có, sử dụng lệnh `ssh-keygen -t dsa`. Nếu có rồi, hãy gửi cho
     Kỳ Anh bản công cộng của cặp khóa đó (nội dung của tập tin có đuôi
     là `.pub`).

   * Sau khi nhận được thông tin qua email riêng, bạn cần đảm bảo thông
     tin bạn có **không được chia sẻ cho bất kỳ bên thứ ba nào**.

2. Cài đặt Ruby trên hệ thống của bạn, bằng lệnh `pacman -S ruby`.
   Sau khi cài đặt Ruby, bạn cần cài đặt các thành phần sau

   * Ruby Gems _(trình quản lý gói cho Ruby; trình này đã có sẵn khi bạn
     cài Ruby 1.9 trên ArchLinux.)_

   * Cài đặt gems bằng lệnh: `gem install nanoc adsf kramdown`

3. Tạo một nhân bản của mã nguồn trang chủ bằng lệnh
    `git clone git@viettug.org:archlinuxvn`

4. Chỉnh sửa tập tin `~/.gitconfig` theo hướng dẫn ở [gitconfig] [].

## Nhóm B: Thực hiện một hoặc nhiều lần

4. Bạn sẽ làm việc với [kramdown] [] và [nanoc] [] và [git] [].
   Hãy dành chút thời gian đọc qua tài liệu của các phần này.
   Bạn có thể học theo các bài viết đã có; đây là cách nhanh nhất.

5. Đối với `git`, bạn có thể tham khảo tài liệu tiếng Việt ở [gitref] [].

## Nhóm C: Thực hiện nhiều lần (mỗi khi viết bài)

5. Sau khi soạn bài, bạn có thể sử dụng `nanoc` để tạo ra các trang tĩnh.
   Bạn dùng lệnh `nanoc view` để tạo một máy phục vụ <http://localhost:3000>
   có thể truy cập được bằng trình duyệt trên máy tính của bạn.

6. Sau khi kiểm tra và vừa ý, bạn có thể xác nhận thay đổi bằng lệnh
   `git commit` và sau đó gửi thay đổi trên máy phục vụ bằng lệnh
   `git push`.

   * Nếu xảy ra xung đột, bạn dùng lệnh `git pull` trước khi thử `git push`
   thêm lần nữa. Nếu vẫn có lỗi, hãy liên lạc với bạn khác để được giúp đỡ.

   * **Lưu ý:** Thư mục _output_ là nơi chứa các trang được sinh ra. Do đó,
   không bao giờ thêm thư mục này vào khi bạn dùng `git commit`.

   Bạn có thể dùng `git commit` với số lần tùy ý. Tuy nhiên, nên hạn chế
   lệnh `git push` vì lệnh này sẽ có ảnh hưởng trực tiếp tới máy phục vụ
   cùng với trang chủ của nhóm.

## Nhóm D: Thông tin khác. Mẹo

7. Sau khi bạn thực hiện thành công `git push`, máy phục vụ của VietTUG
   sẽ tự động biên dịch và cập nhật thay đổi ở trang chủ của ArchLinuxVn.
   Vì các thành viên đều có quyền truy cập như nhau đến mọi trang của nhóm,
   bạn được khuyến cáo hãy **cẩn thận khi chỉnh sửa, thay đổi các bài viết
   đã có**. Tốt nhất, nếu có điều gì phân vân, hãy hội ý với các bạn khác
   trước khi quyết định!

8. Nếu bạn cần thay đổi, bổ sung một số quy tắc biên dịch hoặc thư viện,
   bạn cần quyền ghi vào nhánh `core` _(các thay đổi của những tập tin như
   `Rules`, `libs/*` trên nhánh `master` sẽ bị bỏ qua trong quá trình
   biên dịch)_. Cách đơn giản nhất là liên hệ với người quản lý nhánh
   `core` để xác nhận các thay đổi của bạn. **Lưu ý** rằng việc này là cần
   thiết để đảm bảo an toàn cho máy phục vụ.

## Nhóm E: Quy tắc cần nhớ

5. Không được thay đổi các tập tin `*.rb` và tập tin `layout/*`. Những
   tập tin này chỉ được thay đổi bởi người quản lý cấp cao nhất. Xem
   thêm nhóm D.

1. Đặt tên tập tin chỉ gồm chữ thường, dấu gạch chân và con số. Không dùng
   khoảng trắng, ký tự đặc biệt, tiếng Việt có dấu khi đặt tên tập tin.

4. Nên chọn tên tập tin ngắn gọn, dễ nhớ. Không nên đổi tên tập tin vì
   hệ thống bình luận Disqus sẽ không biết để chuyển các bình luận (nếu
   có) từ bài với tập tin cũ qua bài với tập tin mới.

7. Hạn chế sử dụng tiếng Anh. Nên tìm cách dịch những từ đơn giản, phổ
   biến qua tiếng Việt. Nếu bạn không chắc với cách dịch, có thể ghi
   kèm từ gốc tiếng Anh. Ví dụ, _cập nhật (`update`)_.

8. Đánh dấu các thuật ngữ và các từ ngữ tiếng Anh bằng cặp dấu nháy ngược
   (giống như để tô màu cho đoạn mã nguồn ngắn.) Việc này làm bài viết
   dễ đọc hơn, tập trung hơn.

9. Khi xác nhận thay đổi với `git commit`, bạn cần có chú thích tương đối
   ngắn gọn, nhưng *không nên quá ngắn gọn* (trừ trường hợp các thay đổi
   nhỏ, không đáng kể.)
   * Nên dùng tiếng Anh cho chú thích (do một số chương trình `git client`
     có thể không làm việc với tiếng Việt)
   * Bạn có thể theo dõi cách cung cấp chú thích bằng cách theo dõi cách
     của người khác: từ dòng lệnh gõ `git log` để xem; hoặc
   * Từ giao diện đồ họa chạy chương trình `gitg`
   * Nếu phải chú thích trên nhiều dòng, thì dòng đầu tiên là tóm tắt,
     sau đó là một dòng trắng, và sau đó là các chú thích khác. Ví dụ

<pre>
git commit -m'This is a subject or short message

This is a long description. The above line is a blank link.'
</pre>

   Lưu ý rằng đây là những quy ước phổ biến khi làm việc với `git`.

## Nhóm F: Lưu ý có ích khác

1. Để cho phép người dùng gửi bình luận cho bài viết của bạn, sau khi
   đặt tựa đề, bạn đặt `allow_comment: yes` trong phần `metadata` của
   bài viết. Một ví dụ có trong mã nguồn của bài `vn/author-guide.html`.
   Hệ thống bình luận do Disqus cung cấp.

1. Để tạo liên kết tới các bài viết khác, có thể dùng theo định dạng của
   Kramdown, hoặc dùng dạng wiki mà mô tả có trong thư viện
    `/lib/filters/wiki_filter.rb`.
   Bạn có thể đọc hướng dẫn và theo dõi ví dụ có trong mã nguồn này.

2. Trong phần `metadata` của mỗi bài viết, bạn có thể đặt các thông tin
   tùy ý để tiện tìm kiếm sau này. Ví dụ `tags: [abc, xyz]`, hoặc
   `created_at: 2012 July 25th`,... để tiện tìm kiếm. Một vài thông tin
   sẽ được dùng trong tương lai để hỗ trợ `blog` và `tìm kiếm`.

4. Cuối mỗi bài viết thường có thông tin về tác giả, ngày cập nhật cuối
   cùng. Để bỏ qua thông tin này, chỉ việc đặt `virtual: true` trong phần
   `metadata` của bài viết. _(Thực tế thì thiết lập này để dùng để phân
   biệt những trang tĩnh có nội dung đặt trên tập tin cụ thể, với các
   trang động được sinh ra nhờ các lọc đặc biệt, ví dụ, nhưng các trang
   `/tags/*`.)_

3. Để đánh dấu thẻ (`tag`) cho bài viết, trong phần `metadata` bạn có thể
   chỉ ra danh sách các thẻ như ví dụ sau đây. Mỗi thẻ chỉ gồm các chữ cái
   (hoa thường như nhau) và con số (các cách đặt thẻ sai quy ước này sẽ
   bị bỏ qua). _(Nếu bạn biết `Ruby`, hãy lưu ý rằng không thể thay thế
   việc dùng `[]` bởi `%w{}`. Ngoài ra, cách kiểm tra thẻ của `nanoc`
   thông qua `Nanoc::Helpers::Tagging` rất yếu.)_

<pre>
---
title: Tựa đề bài viết
tags: ['git', 'programming']
---
</pre>

[kramdown]: http://kramdown.rubyforge.org/quickref.html
[nanoc]: http://nanoc.stoneship.org/docs/
[git]: http://git-scm.com/
[gitref]: http://gitref.dragula.org
[gitconfig]: /doc/git/gitconfig
